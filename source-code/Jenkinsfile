pipeline {
 
    agent { node { label 'telesto' } }

    stages {

        stage('chmod scripts') {

            steps {

                sh 'chmod +x ./build-automation/*.sh'                        

            }

        }
        
        stage('build docker image') {

            steps {

                sh 'cd build-automation;./build-pass-1-build-docker-image-from-dockerfile.sh'

            }

        }

        stage('push to dockerhub') {

            steps {

                sh 'cd build-automation;./build-pass-2-push-docker-image-to-dockerhub.sh'

            }

        }   
        
        stage('deploy the docker image to running container') {

            steps {

                sh 'cd build-automation;./execute-pass-1-run-local-environment.sh'

            }

        }             
        
    }

}
